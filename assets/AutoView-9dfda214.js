import{r as T,D as R,a as L,b as N,c as x,d as C,e as v,M as r,R as w,f as y,o as S,g as $,h as I,w as d,i as f,t as F,j as O,k as a,l as t,_ as B,u as j,F as z,m as P,n as V,p as h,q as l}from"./index-d0ab4e42.js";const Y=t("div",{class:"text-h5 mb-4 font-weight-bold text-indigo"}," Scene ",-1),K={class:"my-4"},q=t("div",{class:"text-subtitle-2 mb-2"}," System Messages ",-1),X={class:"my-4"},J=t("div",{class:"text-subtitle-2 mb-2"}," User Messages ",-1),Q={class:"my-4"},W=t("div",{class:"text-subtitle-2 mb-2"}," Drone Host Messages ",-1),Z={class:"my-4"},ee=t("div",{class:"text-subtitle-2 mb-2"}," Delay Seconds ",-1),se={class:"my-4"},te=t("div",{class:"text-subtitle-2 mb-2"}," Expected Messages ",-1),oe={class:"my-4"},ae=t("div",{class:"text-subtitle-2 mb-2"}," API Key ",-1),ne=t("div",{class:"text-h5 mb-4 font-weight-bold text-indigo"}," Result ",-1),de={class:"my-4"},le={__name:"TheDroneHost",setup(H){const e=T({error:"",key:window.atob(localStorage.getItem("key")||""),systemMessage:localStorage.getItem("systemMessage")||R,userMessage:localStorage.getItem("userMessage")||L,droneHostMessage:localStorage.getItem("droneHostMessage")||N,delaySeconds:Number(localStorage.getItem("delaySeconds"))||x,expectedMessages:Number(localStorage.getItem("expectedMessages"))||C,generatedMessage:"",userGeneratedMessages:[],droneHostGeneratedMessages:[]}),_=v(()=>[new r(w,e.systemMessage),new r(y,e.userMessage)]),k=v(()=>[new r(w,e.droneHostMessage)]),G=v(()=>_.value.concat(e.userGeneratedMessages)),c=(u,s)=>localStorage.setItem(u,s),U=()=>localStorage.setItem("key",window.btoa(e.key)),A=async()=>{var s,g,i;e.userGeneratedMessages=[],e.droneHostGeneratedMessages=[];const u=P(e.key);try{for(let n=0;n<e.expectedMessages/2;n+=1){const m=await V(u)({messages:_.value.concat(e.userGeneratedMessages)});e.generatedMessage=m.data.choices[0].message.content,e.userGeneratedMessages.push(new r(h,e.generatedMessage)),e.droneHostGeneratedMessages.push(new r(y,e.generatedMessage));const p=await V(u)({messages:k.value.concat(e.droneHostGeneratedMessages)});e.generatedMessage=p.data.choices[0].message.content,e.userGeneratedMessages.push(new r(y,e.generatedMessage)),e.droneHostGeneratedMessages.push(new r(h,e.generatedMessage)),await new Promise(M=>setTimeout(M,x*1e3))}}catch(n){e.error=((i=(g=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:g.error)==null?void 0:i.message)||n.message}};return(u,s)=>{const g=l("v-snackbar"),i=l("v-textarea"),n=l("v-text-field"),m=l("v-card-item"),p=l("v-btn"),M=l("v-card-actions"),b=l("v-card"),E=l("v-col"),D=l("v-row");return S(),$(z,null,[e.error?(S(),I(g,{key:0,color:"indigo-lighten-1","model-value":"","onUpdate:modelValue":s[0]||(s[0]=o=>e.error="")},{default:d(()=>[f(F(e.error),1)]),_:1})):O("",!0),a(D,{class:"justify-center"},{default:d(()=>[a(E,{cols:"12",sm:"10",md:"6"},{default:d(()=>[a(b,{color:"blue-grey-lighten-5",height:"100%"},{default:d(()=>[a(m,{class:"pa-8 pb-4"},{default:d(()=>[Y,t("div",K,[q,t("div",null,[a(i,{modelValue:e.systemMessage,"onUpdate:modelValue":s[1]||(s[1]=o=>e.systemMessage=o),autofocus:"",color:"indigo","hide-details":"","no-resize":"",rows:"4",variant:"outlined",onInput:s[2]||(s[2]=o=>c("systemMessage",e.systemMessage))},null,8,["modelValue"])])]),t("div",X,[J,t("div",null,[a(i,{modelValue:e.userMessage,"onUpdate:modelValue":s[3]||(s[3]=o=>e.userMessage=o),color:"indigo","hide-details":"","no-resize":"",rows:"4",variant:"outlined",onInput:s[4]||(s[4]=o=>c("userMessage",e.userMessage))},null,8,["modelValue"])])]),t("div",Q,[W,t("div",null,[a(i,{modelValue:e.droneHostMessage,"onUpdate:modelValue":s[5]||(s[5]=o=>e.droneHostMessage=o),color:"indigo","hide-details":"","no-resize":"",rows:"4",variant:"outlined",onInput:s[6]||(s[6]=o=>c("droneHostMessage",e.droneHostMessage))},null,8,["modelValue"])])]),t("div",Z,[ee,t("div",null,[a(n,{modelValue:e.delaySeconds,"onUpdate:modelValue":s[7]||(s[7]=o=>e.delaySeconds=o),color:"indigo",density:"compact","hide-details":"",type:"number",variant:"outlined",onInput:s[8]||(s[8]=o=>c("delaySeconds",e.delaySeconds))},null,8,["modelValue"])])]),t("div",se,[te,t("div",null,[a(n,{modelValue:e.expectedMessages,"onUpdate:modelValue":s[9]||(s[9]=o=>e.expectedMessages=o),color:"indigo",density:"compact","hide-details":"",type:"number",variant:"outlined",onInput:s[10]||(s[10]=o=>c("expectedMessages",e.expectedMessages))},null,8,["modelValue"])])]),t("div",oe,[ae,t("div",null,[a(n,{modelValue:e.key,"onUpdate:modelValue":s[11]||(s[11]=o=>e.key=o),color:"indigo",density:"compact","hide-details":"",type:"password",variant:"outlined",onInput:U},null,8,["modelValue"])])])]),_:1}),a(M,{class:"justify-end pa-8 pt-0"},{default:d(()=>[a(p,{block:"",color:"indigo",variant:"outlined",onClick:A},{default:d(()=>[f(" Run ")]),_:1})]),_:1})]),_:1})]),_:1}),a(E,{cols:"12",sm:"10",md:"6"},{default:d(()=>[a(b,{color:"blue-grey-lighten-5",height:"100%"},{default:d(()=>[a(m,{class:"pa-8 pb-4"},{default:d(()=>[ne,t("div",de,[a(B,{messages:j(G)},null,8,["messages"])])]),_:1})]),_:1})]),_:1})]),_:1})],64)}}},ie={__name:"AutoView",setup(H){return(e,_)=>(S(),I(le))}};export{ie as default};
