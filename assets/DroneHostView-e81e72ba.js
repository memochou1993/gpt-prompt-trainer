import{r as U,D as A,a as D,b as C,c as p,o as b,d as L,e as V,w as n,f as S,t as N,g as $,h as o,i as t,_ as F,u as O,F as B,M as d,R as h,j as y,k as j,l as E,m as H,n as l}from"./index-c20e5e1e.js";const z=t("div",{class:"text-h5 mb-4 font-weight-bold text-indigo"}," Scene ",-1),K={class:"my-4"},P=t("div",{class:"text-subtitle-2 mb-2"}," System Messages ",-1),Y={class:"my-4"},q=t("div",{class:"text-subtitle-2 mb-2"}," User Messages ",-1),J={class:"my-4"},Q=t("div",{class:"text-subtitle-2 mb-2"}," Drone Host Messages ",-1),W={class:"my-4"},X=t("div",{class:"text-subtitle-2 mb-2"}," API Key ",-1),Z=t("div",{class:"text-h5 mb-4 font-weight-bold text-indigo"}," Result ",-1),ee={class:"my-4"},se={__name:"TheDroneHost",setup(x){const e=U({error:"",key:window.atob(localStorage.getItem("key")||""),systemMessage:localStorage.getItem("systemMessage")||A,userMessage:localStorage.getItem("userMessage")||D,droneHostMessage:localStorage.getItem("droneHostMessage")||C,generatedMessage:"",userGeneratedMessages:[],droneHostGeneratedMessages:[]}),m=p(()=>[new d(h,e.systemMessage),new d(y,e.userMessage)]),k=p(()=>[new d(h,e.droneHostMessage)]),G=p(()=>m.value.concat(e.userGeneratedMessages)),_=(c,s)=>localStorage.setItem(c,s),I=()=>localStorage.setItem("key",window.btoa(e.key)),R=async()=>{var s,g,i;e.userGeneratedMessages=[],e.droneHostGeneratedMessages=[];const c=j(e.key);try{for(let r=0;r<2;r+=1){const u=await E(c)({messages:m.value.concat(e.userGeneratedMessages)});e.generatedMessage=u.data.choices[0].message.content,e.userGeneratedMessages.push(new d(H,e.generatedMessage)),e.droneHostGeneratedMessages.push(new d(y,e.generatedMessage));const M=await E(c)({messages:k.value.concat(e.droneHostGeneratedMessages)});e.generatedMessage=M.data.choices[0].message.content,e.userGeneratedMessages.push(new d(y,e.generatedMessage)),e.droneHostGeneratedMessages.push(new d(H,e.generatedMessage)),await new Promise(v=>setTimeout(v,1e3))}}catch(r){e.error=((i=(g=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:g.error)==null?void 0:i.message)||r.message}};return(c,s)=>{const g=l("v-snackbar"),i=l("v-textarea"),r=l("v-text-field"),u=l("v-card-item"),M=l("v-btn"),v=l("v-card-actions"),w=l("v-card"),f=l("v-col"),T=l("v-row");return b(),L(B,null,[e.error?(b(),V(g,{key:0,color:"indigo-lighten-1","model-value":"","onUpdate:modelValue":s[0]||(s[0]=a=>e.error="")},{default:n(()=>[S(N(e.error),1)]),_:1})):$("",!0),o(T,{class:"justify-center"},{default:n(()=>[o(f,{cols:"12",sm:"10",md:"6"},{default:n(()=>[o(w,{color:"blue-grey-lighten-5",height:"100%"},{default:n(()=>[o(u,{class:"pa-8 pb-4"},{default:n(()=>[z,t("div",K,[P,t("div",null,[o(i,{modelValue:e.systemMessage,"onUpdate:modelValue":s[1]||(s[1]=a=>e.systemMessage=a),autofocus:"",color:"indigo","hide-details":"","no-resize":"",rows:"4",variant:"outlined",onInput:s[2]||(s[2]=a=>_("systemMessage",e.systemMessage))},null,8,["modelValue"])])]),t("div",Y,[q,t("div",null,[o(i,{modelValue:e.userMessage,"onUpdate:modelValue":s[3]||(s[3]=a=>e.userMessage=a),color:"indigo","hide-details":"","no-resize":"",rows:"4",variant:"outlined",onInput:s[4]||(s[4]=a=>_("userMessage",e.userMessage))},null,8,["modelValue"])])]),t("div",J,[Q,t("div",null,[o(i,{modelValue:e.droneHostMessage,"onUpdate:modelValue":s[5]||(s[5]=a=>e.droneHostMessage=a),color:"indigo","hide-details":"","no-resize":"",rows:"4",variant:"outlined",onInput:s[6]||(s[6]=a=>_("droneHostMessage",e.droneHostMessage))},null,8,["modelValue"])])]),t("div",W,[X,t("div",null,[o(r,{modelValue:e.key,"onUpdate:modelValue":s[7]||(s[7]=a=>e.key=a),color:"indigo",density:"compact","hide-details":"",type:"password",variant:"outlined",onInput:I},null,8,["modelValue"])])])]),_:1}),o(v,{class:"justify-end pa-8 pt-0"},{default:n(()=>[o(M,{block:"",color:"indigo",variant:"outlined",onClick:R},{default:n(()=>[S(" Run ")]),_:1})]),_:1})]),_:1})]),_:1}),o(f,{cols:"12",sm:"10",md:"6"},{default:n(()=>[o(w,{color:"blue-grey-lighten-5",height:"100%"},{default:n(()=>[o(u,{class:"pa-8 pb-4"},{default:n(()=>[Z,t("div",ee,[o(F,{messages:O(G)},null,8,["messages"])])]),_:1})]),_:1})]),_:1})]),_:1})],64)}}},oe={__name:"DroneHostView",setup(x){return(e,m)=>(b(),V(se))}};export{oe as default};
